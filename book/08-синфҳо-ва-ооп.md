# Боби 8: Синфҳо ва барномасозии объектӣ-мутамарказ (ООП)

## 8.1. Муқаддима ба синфҳо

Синф - ин қолабе аст, ки объектҳоро тавсиф мекунад. Он хосиятҳо (маълумот) ва усулҳо (рафтор) -ро дар худ муттаҳид мекунад.

### 8.1.1. Эҷоди синфи оддӣ

```somonscript
синф Шахс {
    // Хосиятҳои хосусӣ
    хосусӣ ном: сатр;
    хосусӣ синну_сол: рақам;

    // Конструктор
    конструктор(ном: сатр, синну_сол: рақам) {
        ин.ном = ном;
        ин.синну_сол = синну_сол;
    }

    // Усулҳои ҷамъиятӣ
    ҷамъиятӣ гирифтани_ном(): сатр {
        бозгашт ин.ном;
    }

    ҷамъиятӣ гирифтани_синну_сол(): рақам {
        бозгашт ин.синну_сол;
    }

    ҷамъиятӣ намоиш(): холӣ {
        чоп.сабт(`Ном: ${ин.ном}, Синну сол: ${ин.синну_сол}`);
    }
}

// Эҷоди намуд (instance)
тағйирёбанда шахс1 = нав Шахс("Аҳмад", 25);
тағйирёбанда шахс2 = нав Шахс("Фотима", 22);

шахс1.намоиш();  // Ном: Аҳмад, Синну сол: 25
шахс2.намоиш();  // Ном: Фотима, Синну сол: 22
```

## 8.2. Дастрасӣ ба хосиятҳо ва усулҳо

### 8.2.1. Сатҳҳои дастрасӣ

```somonscript
синф Ҳисоби_банкӣ {
    // Хосусӣ - танҳо дар дохили синф дастрас
    хосусӣ баланс: рақам;
    хосусӣ рақами_ҳисоб: сатр;

    // Ҷамъиятӣ - ба ҳама дастрас
    ҷамъиятӣ соҳиб: сатр;

    конструктор(соҳиб: сатр, рақами_ҳисоб: сатр) {
        ин.соҳиб = соҳиб;
        ин.рақами_ҳисоб = рақами_ҳисоб;
        ин.баланс = 0;
    }

    ҷамъиятӣ депозит(маблағ: рақам): холӣ {
        ин.баланс += маблағ;
        чоп.сабт(`Депозит: ${маблағ}. Баланс: ${ин.баланс}`);
    }

    ҷамъиятӣ бардоштан(маблағ: рақам): мантиқӣ {
        агар (маблағ <= ин.баланс) {
            ин.баланс -= маблағ;
            чоп.сабт(`Бардошт: ${маблағ}. Баланс: ${ин.баланс}`);
            бозгашт дуруст;
        } вагарна {
            чоп.сабт("Маблағи нокифоя!");
            бозгашт нодуруст;
        }
    }

    ҷамъиятӣ гирифтани_баланс(): рақам {
        бозгашт ин.баланс;
    }
}

тағйирёбанда ҳисоб = нав Ҳисоби_банкӣ("Аҳмад Раҳимов", "TJ1234567890");
ҳисоб.депозит(1000);
ҳисоб.бардоштан(200);
чоп.сабт(`Баланс: ${ҳисоб.гирифтани_баланс()}`);
```

## 8.3. Меросбарӣ (Inheritance)

Меросбарӣ имкон медиҳад, ки синфи нав хосиятҳо ва усулҳои синфи мавҷударо гирад.

```somonscript
// Синфи асосӣ (базавӣ)
синф Ҳайвон {
    хосусӣ ном: сатр;

    конструктор(ном: сатр) {
        ин.ном = ном;
    }

    ҷамъиятӣ овоз_додан(): холӣ {
        чоп.сабт("Ҳайвон овоз медиҳад");
    }

    ҷамъиятӣ гирифтани_ном(): сатр {
        бозгашт ин.ном;
    }
}

// Синфи меросбар
синф Саг мерос Ҳайвон {
    хосусӣ зот: сатр;

    конструктор(ном: сатр, зот: сатр) {
        супер(ном);  // Садо кардани конструктори синфи асосӣ
        ин.зот = зот;
    }

    // Аз нав муайян кардани усул (Override)
    ҷамъиятӣ овоз_додан(): холӣ {
        чоп.сабт(`${ин.гирифтани_ном()} мегӯяд: Вов-вов!`);
    }

    ҷамъиятӣ гирифтани_зот(): сатр {
        бозгашт ин.зот;
    }
}

синф Гурба мерос Ҳайвон {
    конструктор(ном: сатр) {
        супер(ном);
    }

    ҷамъиятӣ овоз_додан(): холӣ {
        чоп.сабт(`${ин.гирифтани_ном()} мегӯяд: Мяу-мяу!`);
    }
}

// Истифода
тағйирёбанда саг = нав Саг("Рекс", "Овчарка");
тағйирёбанда гурба = нав Гурба("Мурка");

саг.овоз_додан();    // Рекс мегӯяд: Вов-вов!
гурба.овоз_додан();  // Мурка мегӯяд: Мяу-мяу!
```

## 8.4. Интерфейсҳо

Интерфейс контракте аст, ки синф бояд риоя кунад.

```somonscript
// Таърифи интерфейс
интерфейс Ҳаракаткунанда {
    ҳаракат_кардан(): холӣ;
    истодан(): холӣ;
}

// Татбиқи интерфейс
синф Автомобил татбиқ Ҳаракаткунанда {
    хосусӣ номбаланд: сатр;
    хосусӣ тезӣ: рақам;

    конструктор(номбаланд: сатр) {
        ин.номбаланд = номбаланд;
        ин.тезӣ = 0;
    }

    ҷамъиятӣ ҳаракат_кардан(): холӣ {
        ин.тезӣ = 60;
        чоп.сабт(`${ин.номбаланд} ҳаракат кард. Тезӣ: ${ин.тезӣ} км/с`);
    }

    ҷамъиятӣ истодан(): холӣ {
        ин.тезӣ = 0;
        чоп.сабт(`${ин.номбаланд} истод`);
    }

    ҷамъиятӣ тезонидан(): холӣ {
        ин.тезӣ += 20;
        чоп.сабт(`Тезӣ: ${ин.тезӣ} км/с`);
    }
}

тағйирёбанда мошин = нав Автомобил("Toyota");
мошин.ҳаракат_кардан();
мошин.тезонидан();
мошин.истодан();
```

## 8.5. Синфҳои мавҳум (Abstract Classes)

Синфи мавҳум синфе аст, ки наметавон аз он мустақиман намуд эҷод кард.

```somonscript
// Синфи мавҳум
мавҳум синф Шакл {
    хосусӣ ранг: сатр;

    конструктор(ранг: сатр) {
        ин.ранг = ранг;
    }

    // Усули мавҳум - бояд дар синфҳои меросбар татбиқ шавад
    мавҳум майдон(): рақам;
    мавҳум периметр(): рақам;

    ҷамъиятӣ гирифтани_ранг(): сатр {
        бозгашт ин.ранг;
    }
}

// Татбиқи синфи мавҳум
синф Тӯртбурчӣ мерос Шакл {
    хосусӣ паҳнӣ: рақам;
    хосусӣ баландӣ: рақам;

    конструктор(паҳнӣ: рақам, баландӣ: рақам, ранг: сатр) {
        супер(ранг);
        ин.паҳнӣ = паҳнӣ;
        ин.баландӣ = баландӣ;
    }

    ҷамъиятӣ майдон(): рақам {
        бозгашт ин.паҳнӣ * ин.баландӣ;
    }

    ҷамъиятӣ периметр(): рақам {
        бозгашт 2 * (ин.паҳнӣ + ин.баландӣ);
    }
}

синф Доира мерос Шакл {
    хосусӣ радиус: рақам;
    собит ПИ: рақам = 3.14159;

    конструктор(радиус: рақам, ранг: сатр) {
        супер(ранг);
        ин.радиус = радиус;
    }

    ҷамъиятӣ майдон(): рақам {
        бозгашт Доира.ПИ * ин.радиус * ин.радиус;
    }

    ҷамъиятӣ периметр(): рақам {
        бозгашт 2 * Доира.ПИ * ин.радиус;
    }
}

// Истифода
тағйирёбанда тӯртбурчӣ = нав Тӯртбурчӣ(5, 10, "сурх");
тағйирёбанда доира = нав Доира(7, "кабуд");

чоп.сабт(`Майдони тӯртбурчӣ: ${тӯртбурчӣ.майдон()}`);
чоп.сабт(`Периметри доира: ${доира.периметр()}`);
```

## 8.6. Хосиятҳо ва усулҳои статикӣ

Хосиятҳо ва усулҳои статикӣ ба худи синф тааллуқ доранд, на ба намудҳои он.

```somonscript
синф Математика {
    статикӣ ПИ: рақам = 3.14159;
    статикӣ Е: рақам = 2.71828;

    статикӣ макс(а: рақам, б: рақам): рақам {
        бозгашт а > б ? а : б;
    }

    статикӣ мин(а: рақам, б: рақам): рақам {
        бозгашт а < б ? а : б;
    }

    статикӣ майдони_доира(радиус: рақам): рақам {
        бозгашт Математика.ПИ * радиус * радиус;
    }

    статикӣ дараҷа(адад: рақам, дараҷа: рақам): рақам {
        бозгашт адад ** дараҷа;
    }
}

// Истифодаи усулҳои статикӣ (бе эҷоди намуд)
чоп.сабт("ПИ: " + Математика.ПИ);
чоп.сабт("Макс(10, 5): " + Математика.макс(10, 5));
чоп.сабт("Майдони доира: " + Математика.майдони_доира(5));
чоп.сабт("2^3: " + Математика.дараҷа(2, 3));
```

## 8.7. Мисолҳои амалӣ

### Мисоли 1: Системаи идораи китобхона

```somonscript
синф Китоб {
    хосусӣ номбаланд: сатр;
    хосусӣ муаллиф: сатр;
    хосусӣ ISBN: сатр;
    хосусӣ қарз_дода_шудааст: мантиқӣ;

    конструктор(ном: сатр, муаллиф: сатр, ISBN: сатр) {
        ин.ном = ном;
        ин.муаллиф = муаллиф;
        ин.ISBN = ISBN;
        ин.қарз_дода_шудааст = нодуруст;
    }

    ҷамъиятӣ қарз_додан(): мантиқӣ {
        агар (!ин.қарз_дода_шудааст) {
            ин.қарз_дода_шудааст = дуруст;
            бозгашт дуруст;
        }
        бозгашт нодуруст;
    }

    ҷамъиятӣ баргардондан(): холӣ {
        ин.қарз_дода_шудааст = нодуруст;
    }

    ҷамъиятӣ дастрас_аст(): мантиқӣ {
        бозгашт !ин.қарз_дода_шудааст;
    }

    ҷамъиятӣ намоиш(): холӣ {
        тағйирёбанда ҳолат: сатр = ин.қарз_дода_шудааст ? "Қарз дода шуд" : "Дастрас";
        чоп.сабт(`"${ин.ном}" - ${ин.муаллиф} [${ҳолат}]`);
    }
}

синф Китобхона {
    хосусӣ ном: сатр;
    хосусӣ китобҳо: Китоб[];

    конструктор(ном: сатр) {
        ин.ном = ном;
        ин.китобҳо = [];
    }

    ҷамъиятӣ илова_кардани_китоб(китоб: Китоб): холӣ {
        ин.китобҳо.илова(китоб);
        чоп.сабт(`Китоб "${китоб.гирифтани_ном()}" илова карда шуд`);
    }

    ҷамъиятӣ намоиши_китобҳо(): холӣ {
        чоп.сабт(`\n=== Китобхонаи "${ин.ном}" ===`);
        барои (тағйирёбанда и: рақам = 0; и < ин.китобҳо.дарозӣ; и++) {
            чоп.сабт(`${и + 1}. `);
            ин.китобҳо[и].намоиш();
        }
    }
}

// Истифода
тағйирёбанда китобхона = нав Китобхона("Китобхонаи миллӣ");

тағйирёбанда китоб1 = нав Китоб("Шоҳнома", "Фирдавсӣ", "123-456");
тағйирёбанда китоб2 = нав Китоб("Гулистон", "Саъдӣ", "789-012");

китобхона.илова_кардани_китоб(китоб1);
китобхона.илова_кардани_китоб(китоб2);

китоб1.қарз_додан();
китобхона.намоиши_китобҳо();
```

### Мисоли 2: Системаи идораи донишҷӯён

```somonscript
мавҳум синф Шахс {
    муҳофизатшуда ном: сатр;
    муҳофизатшуда синну_сол: рақам;

    конструктор(ном: сатр, синну_сол: рақам) {
        ин.ном = ном;
        ин.синну_сол = синну_сол;
    }

    мавҳум намоиш(): холӣ;
}

синф Донишҷӯ мерос Шахс {
    хосусӣ рақами_донишҷӯӣ: сатр;
    хосусӣ донишкада: сатр;
    хосусӣ бахоҳо: рақам[];

    конструктор(ном: сатр, синну_сол: рақам, рақами_донишҷӯӣ: сатр, донишкада: сатр) {
        супер(ном, синну_сол);
        ин.рақами_донишҷӯӣ = рақами_донишҷӯӣ;
        ин.донишкада = донишкада;
        ин.бахоҳо = [];
    }

    ҷамъиятӣ илова_кардани_бахо(бахо: рақам): холӣ {
        ин.бахоҳо.илова(бахо);
    }

    ҷамъиятӣ ҳисоби_миёна(): рақам {
        агар (ин.бахоҳо.дарозӣ === 0) бозгашт 0;
        тағйирёбанда ҷамъ: рақам = ин.бахоҳо.кофтан((а: рақам, б: рақам): рақам => а + б, 0);
        бозгашт ҷамъ / ин.бахоҳо.дарозӣ;
    }

    ҷамъиятӣ намоиш(): холӣ {
        чоп.сабт(`Донишҷӯ: ${ин.ном} (${ин.синну_сол} сол)`);
        чоп.сабт(`Рақами донишҷӯӣ: ${ин.рақами_донишҷӯӣ}`);
        чоп.сабт(`Донишкада: ${ин.донишкада}`);
        чоп.сабт(`Миёнаи бахо: ${ин.ҳисоби_миёна()}`);
    }
}

синф Устод мерос Шахс {
    хосусӣ фанн: сатр;
    хосусӣ таҷриба: рақам;

    конструктор(ном: сатр, синну_сол: рақам, фанн: сатр, таҷриба: рақам) {
        супер(ном, синну_сол);
        ин.фанн = фанн;
        ин.таҷриба = таҷриба;
    }

    ҷамъиятӣ намоиш(): холӣ {
        чоп.сабт(`Устод: ${ин.ном} (${ин.синну_сол} сол)`);
        чоп.сабт(`Фанн: ${ин.фанн}`);
        чоп.сабт(`Таҷриба: ${ин.таҷриба} сол`);
    }
}

// Истифода
тағйирёбанда донишҷӯ = нав Донишҷӯ("Аҳмад Раҳимов", 20, "D12345", "Математика");
донишҷӯ.илова_кардани_бахо(5);
донишҷӯ.илова_кардани_бахо(4);
донишҷӯ.илова_кардани_бахо(5);
донишҷӯ.намоиш();

чоп.сабт("");

тағйирёбанда устод = нав Устод("Фаридун Каримов", 45, "Физика", 20);
устод.намоиш();
```

## 8.8. Хулоса

Дар ин боб шумо омӯхтед:
- Эҷод ва истифодаи синфҳо
- Сатҳҳои дастрасӣ (хосусӣ, ҷамъиятӣ, муҳофизатшуда)
- Меросбарӣ ва аз нав муайянкунӣ
- Интерфейсҳо
- Синфҳои мавҳум
- Усулҳо ва хосиятҳои статикӣ

---

**Машқҳо:**

1. Синфе эҷод кунед барои "Автомобил" бо хосиятҳо (ном, модел, тезӣ) ва усулҳо (оғоз, истодан, тезонидан)
2. Синфе барои "Ҳисоби банкӣ" созед, ки амалиёти депозит, бардошт ва гузаронидани маблағро иҷро мекунад
3. Системаи меросбарии "Ҳайвон" → "Парранда" → "Тӯтӣ" созед
4. Интерфейси "Чоп кунанда" эҷод кунед ва онро дар якчанд синф татбиқ кунед
