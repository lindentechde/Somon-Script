# Боби 12: Мисолҳои амалӣ

Дар ин боб мо барномаҳои комили амалиро месозем, ки ҳамаи мавзӯъҳои омӯхтаро истифода мебаранд.

## 12.1. Лоиҳа 1: Системаи идораи китобхона

Системаи пурраи идораи китобхона бо имкониятҳои зиёд.

```somonscript
// kitobxona.som

// Синфи Китоб
синф Китоб {
    хосусӣ ид: рақам;
    хосусӣ ном: сатр;
    хосусӣ муаллиф: сатр;
    хосусӣ соли_нашр: рақам;
    хосусӣ қарз_дода_шудааст: мантиқӣ;
    хосусӣ қарзгир: сатр | холӣ;

    конструктор(ид: рақам, ном: сатр, муаллиф: сатр, соли_нашр: рақам) {
        ин.ид = ид;
        ин.ном = ном;
        ин.муаллиф = муаллиф;
        ин.соли_нашр = соли_нашр;
        ин.қарз_дода_шудааст = нодуруст;
        ин.қарзгир = холӣ;
    }

    ҷамъиятӣ гирифтани_ид(): рақам {
        бозгашт ин.ид;
    }

    ҷамъиятӣ қарз_додан(ном_қарзгир: сатр): мантиқӣ {
        агар (!ин.қарз_дода_шудааст) {
            ин.қарз_дода_шудааст = дуруст;
            ин.қарзгир = ном_қарзгир;
            чоп.сабт(`Китоби "${ин.ном}" ба ${ном_қарзгир} қарз дода шуд`);
            бозгашт дуруст;
        }
        чоп.хато("Китоб аллакай қарз дода шудааст");
        бозгашт нодуруст;
    }

    ҷамъиятӣ баргардондан(): мантиқӣ {
        агар (ин.қарз_дода_шудааст) {
            чоп.сабт(`Китоби "${ин.ном}" баргардонда шуд`);
            ин.қарз_дода_шудааст = нодуруст;
            ин.қарзгир = холӣ;
            бозгашт дуруст;
        }
        чоп.хато("Китоб қарз дода нашудааст");
        бозгашт нодуруст;
    }

    ҷамъиятӣ намоиш(): холӣ {
        тағйирёбанда ҳолат: сатр = ин.қарз_дода_шудааст
            ? `Қарз ба ${ин.қарзгир}`
            : "Дастрас";
        чоп.сабт(`${ин.ид}. "${ин.ном}" - ${ин.муаллиф} (${ин.соли_нашр}) [${ҳолат}]`);
    }
}

// Синфи Китобхона
синф Китобхона {
    хосусӣ ном: сатр;
    хосусӣ китобҳо: Китоб[];
    хосусӣ идентификатори_навбатӣ: рақам;

    конструктор(ном: сатр) {
        ин.ном = ном;
        ин.китобҳо = [];
        ин.идентификатори_навбатӣ = 1;
    }

    ҷамъиятӣ илова_кардани_китоб(ном: сатр, муаллиф: сатр, сол: рақам): Китоб {
        тағйирёбанда китоби_нав = нав Китоб(ин.идентификатори_навбатӣ++, ном, муаллиф, сол);
        ин.китобҳо.илова(китоби_нав);
        чоп.сабт(`Китоб "${ном}" илова карда шуд`);
        бозгашт китоби_нав;
    }

    ҷамъиятӣ ҷустуҷӯи_китоб(ид: рақам): Китоб | холӣ {
        барои (тағйирёбанда и: рақам = 0; и < ин.китобҳо.дарозӣ; и++) {
            агар (ин.китобҳо[и].гирифтани_ид() === ид) {
                бозгашт ин.китобҳо[и];
            }
        }
        бозгашт холӣ;
    }

    ҷамъиятӣ намоиши_ҳамаи_китобҳо(): холӣ {
        чоп.сабт(`\n=== Китобхонаи "${ин.ном}" ===`);
        агар (ин.китобҳо.дарозӣ === 0) {
            чоп.сабт("Китобҳо нестанд");
            бозгашт;
        }
        барои (тағйирёбанда и: рақам = 0; и < ин.китобҳо.дарозӣ; и++) {
            ин.китобҳо[и].намоиш();
        }
    }

    ҷамъиятӣ намоиши_китобҳои_дастрас(): холӣ {
        чоп.сабт("\n=== Китобҳои дастрас ===");
        тағйирёбанда шумора: рақам = 0;
        барои (тағйирёбанда и: рақам = 0; и < ин.китобҳо.дарозӣ; и++) {
            агар (!ин.китобҳо[и].қарз_дода_шудааст) {
                ин.китобҳо[и].намоиш();
                шумора++;
            }
        }
        агар (шумора === 0) {
            чоп.сабт("Китобҳои дастрас нестанд");
        }
    }
}

// Истифода
тағйирёбанда китобхона = нав Китобхона("Китобхонаи миллӣ");

// Илова кардани китобҳо
китобхона.илова_кардани_китоб("Шоҳнома", "Фирдавсӣ", 1010);
китобхона.илова_кардани_китоб("Гулистон", "Саъдӣ", 1258);
китобхона.илова_кардани_китоб("Бӯстон", "Саъдӣ", 1257);

китобхона.намоиши_ҳамаи_китобҳо();

// Қарз додан
тағйирёбанда китоб1: Китоб | холӣ = китобхона.ҷустуҷӯи_китоб(1);
агар (китоб1 !== холӣ) {
    китоб1.қарз_додан("Аҳмад Раҳимов");
}

китобхона.намоиши_китобҳои_дастрас();

// Баргардондан
агар (китоб1 !== холӣ) {
    китоб1.баргардондан();
}

китобхона.намоиши_китобҳои_дастрас();
```

## 12.2. Лоиҳа 2: Калькулятори пешрафта

```somonscript
// calculator.som

синф Калькулятор {
    хосусӣ таърихи_амалиётҳо: сатр[];

    конструктор() {
        ин.таърихи_амалиётҳо = [];
    }

    ҷамъиятӣ ҷамъ(а: рақам, б: рақам): рақам {
        тағйирёбанда натиҷа: рақам = а + б;
        ин.сабти_амалиёт(`${а} + ${б} = ${натиҷа}`);
        бозгашт натиҷа;
    }

    ҷамъиятӣ тарҳ(а: рақам, б: рақам): рақам {
        тағйирёбанда натиҷа: рақам = а - б;
        ин.сабти_амалиёт(`${а} - ${б} = ${натиҷа}`);
        бозгашт натиҷа;
    }

    ҷамъиятӣ зарб(а: рақам, б: рақам): рақам {
        тағйирёбанда натиҷа: рақам = а * б;
        ин.сабти_амалиёт(`${а} × ${б} = ${натиҷа}`);
        бозгашт натиҷа;
    }

    ҷамъиятӣ тақсим(а: рақам, б: рақам): рақам {
        кӯшиш {
            агар (б === 0) {
                партофтан нав Хато("Тақсим ба сифр ғайриқонунӣ аст!");
            }
            тағйирёбанда натиҷа: рақам = а / б;
            ин.сабти_амалиёт(`${а} ÷ ${б} = ${натиҷа}`);
            бозгашт натиҷа;
        } гирифтан (хато) {
            чоп.хато("Хато: " + хато.паём);
            бозгашт 0;
        }
    }

    ҷамъиятӣ дараҷа(асос: рақам, дараҷа: рақам): рақам {
        тағйирёбанда натиҷа: рақам = асос ** дараҷа;
        ин.сабти_амалиёт(`${асос}^${дараҷа} = ${натиҷа}`);
        бозгашт натиҷа;
    }

    ҷамъиятӣ квадрати_реша(х: рақам): рақам {
        кӯшиш {
            агар (х < 0) {
                партофтан нав Хато("Квадрати решаи адади манфӣ вуҷуд надорад!");
            }
            тағйирёбанда натиҷа: рақам = Математика.sqrt(х);
            ин.сабти_амалиёт(`√${х} = ${натиҷа}`);
            бозгашт натиҷа;
        } гирифтан (хато) {
            чоп.хато("Хато: " + хато.паём);
            бозгашт 0;
        }
    }

    хосусӣ сабти_амалиёт(амалиёт: сатр): холӣ {
        ин.таърихи_амалиётҳо.илова(амалиёт);
    }

    ҷамъиятӣ намоиши_таърих(): холӣ {
        чоп.сабт("\n=== Таърихи амалиётҳо ===");
        агар (ин.таърихи_амалиётҳо.дарозӣ === 0) {
            чоп.сабт("Таърих холӣ аст");
            бозгашт;
        }
        барои (тағйирёбанда и: рақам = 0; и < ин.таърихи_амалиётҳо.дарозӣ; и++) {
            чоп.сабт(`${и + 1}. ${ин.таърихи_амалиётҳо[и]}`);
        }
    }

    ҷамъиятӣ полиз_кардани_таърих(): холӣ {
        ин.таърихи_амалиётҳо = [];
        чоп.сабт("Таърих полиз карда шуд");
    }
}

// Истифода
тағйирёбанда калькулятор = нав Калькулятор();

калькулятор.ҷамъ(10, 5);
калькулятор.тарҳ(20, 7);
калькулятор.зарб(6, 8);
калькулятор.тақсим(100, 4);
калькулятор.дараҷа(2, 10);
калькулятор.квадрати_реша(16);

калькулятор.намоиши_таърих();

// Кӯшиши амалиёти нодуруст
калькулятор.тақсим(10, 0);
калькулятор.квадрати_реша(-4);

калькулятор.намоиши_таърих();
```

## 12.3. Лоиҳа 3: Системаи идораи донишҷӯён

Системаи пурра бо намудҳои пешрафта, интерфейсҳо ва модулҳо.

```somonscript
// student-system.som

интерфейс Чопшаванда {
    чоп_кардан(): холӣ;
}

синф Донишҷӯ татбиқ Чопшаванда {
    хосусӣ ид: сатр;
    хосусӣ ном: сатр;
    хосусӣ фамилия: сатр;
    хосусӣ синну_сол: рақам;
    хосусӣ бахоҳо: рақам[];

    конструктор(ид: сатр, ном: сатр, фамилия: сатр, синну_сол: рақам) {
        ин.ид = ид;
        ин.ном = ном;
        ин.фамилия = фамилия;
        ин.синну_сол = синну_сол;
        ин.бахоҳо = [];
    }

    ҷамъиятӣ илова_кардани_бахо(бахо: рақам): холӣ {
        агар (бахо >= 2 && бахо <= 5) {
            ин.бахоҳо.илова(бахо);
        } вагарна {
            чоп.хато("Бахо бояд аз 2 то 5 бошад");
        }
    }

    ҷамъиятӣ ҳисоби_миёнаи_бахо(): рақам {
        агар (ин.бахоҳо.дарозӣ === 0) бозгашт 0;

        тағйирёбанда ҷамъ: рақам = 0;
        барои (тағйирёбанда и: рақам = 0; и < ин.бахоҳо.дарозӣ; и++) {
            ҷамъ += ин.бахоҳо[и];
        }
        бозгашт ҷамъ / ин.бахоҳо.дарозӣ;
    }

    ҷамъиятӣ гирифтани_ид(): сатр {
        бозгашт ин.ид;
    }

    ҷамъиятӣ чоп_кардан(): холӣ {
        чоп.сабт(`ID: ${ин.ид}`);
        чоп.сабт(`Ном: ${ин.ном} ${ин.фамилия}`);
        чоп.сабт(`Синну сол: ${ин.синну_сол}`);
        чоп.сабт(`Бахоҳо: ${ин.бахоҳо.пайвастан(", ")}`);
        чоп.сабт(`Миёна: ${ин.ҳисоби_миёнаи_бахо().toFixed(2)}`);
    }
}

синф Синф {
    хосусӣ ном: сатр;
    хосусӣ донишҷӯён: Донишҷӯ[];

    конструктор(ном: сатр) {
        ин.ном = ном;
        ин.донишҷӯён = [];
    }

    ҷамъиятӣ илова_кардани_донишҷӯ(донишҷӯ: Донишҷӯ): холӣ {
        ин.донишҷӯён.илова(донишҷӯ);
        чоп.сабт(`Донишҷӯ ${донишҷӯ.гирифтани_ид()} ба синфи "${ин.ном}" илова карда шуд`);
    }

    ҷамъиятӣ ҷустуҷӯи_донишҷӯ(ид: сатр): Донишҷӯ | холӣ {
        барои (тағйирёбанда и: рақам = 0; и < ин.донишҷӯён.дарозӣ; и++) {
            агар (ин.донишҷӯён[и].гирифтани_ид() === ид) {
                бозгашт ин.донишҷӯён[и];
            }
        }
        бозгашт холӣ;
    }

    ҷамъиятӣ намоиши_донишҷӯён(): холӣ {
        чоп.сабт(`\n=== Синфи ${ин.ном} ===`);
        чоп.сабт(`Шумораи донишҷӯён: ${ин.донишҷӯён.дарозӣ}`);
        чоп.сабт("");

        барои (тағйирёбанда и: рақам = 0; и < ин.донишҷӯён.дарозӣ; и++) {
            чоп.сабт(`Донишҷӯи №${и + 1}:`);
            ин.донишҷӯён[и].чоп_кардан();
            чоп.сабт("");
        }
    }

    ҷамъиятӣ ҳисоби_миёнаи_синф(): рақам {
        агар (ин.донишҷӯён.дарозӣ === 0) бозгашт 0;

        тағйирёбанда ҷамъ: рақам = 0;
        барои (тағйирёбанда и: рақам = 0; и < ин.донишҷӯён.дарозӣ; и++) {
            ҷамъ += ин.донишҷӯён[и].ҳисоби_миёнаи_бахо();
        }
        бозгашт ҷамъ / ин.донишҷӯён.дарозӣ;
    }
}

// Истифода
тағйирёбанда синф = нав Синф("11-А");

тағйирёбанда донишҷӯ1 = нав Донишҷӯ("D001", "Аҳмад", "Раҳимов", 17);
донишҷӯ1.илова_кардани_бахо(5);
донишҷӯ1.илова_кардани_бахо(4);
донишҷӯ1.илова_кардани_бахо(5);

тағйирёбанда донишҷӯ2 = нав Донишҷӯ("D002", "Фотима", "Каримова", 16);
донишҷӯ2.илова_кардани_бахо(5);
донишҷӯ2.илова_кардани_бахо(5);
донишҷӯ2.илова_кардани_бахо(5);

синф.илова_кардани_донишҷӯ(донишҷӯ1);
синф.илова_кардани_донишҷӯ(донишҷӯ2);

синф.намоиши_донишҷӯён();

чоп.сабт(`Миёнаи синф: ${синф.ҳисоби_миёнаи_синф().toFixed(2)}`);
```

## 12.4. Хулоса

Дар ин китоб шумо омӯхтед:
- Асосҳои забони SomonScript
- Тағйирёбандаҳо, намудҳои маълумот ва операторҳо
- Сохторҳои назорат ва давраҳо
- Функсияҳо ва синфҳо
- Системаи модулҳо ва намудҳо
- Идораи хатогиҳо
- Барномаҳои амалӣ

SomonScript забони пурқуввате аст, ки имкон медиҳад барномасозиро ба забони тоҷикӣ анҷом диҳед. Бо омӯхтани ин китоб шумо тавонистед асосҳои барномасозиро фаҳмед ва метавонед барномаҳои худро эҷод кунед.

---

**Лоиҳаҳои пешниҳодӣ барои машқ:**

1. Системаи идораи мағозаи китобфурӯшӣ
2. Бозии компютерии оддӣ (масалан, Ҳадси адад)
3. Системаи идораи корҳои рӯзона (Todo List)
4. Калькулятори конвертатсияи асъор
5. Системаи идораи маҳсулоти анбор
