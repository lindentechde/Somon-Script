# SonarQube Project Configuration for SomonScript

# Project identification
sonar.projectKey=lindentech_somon-script
sonar.organization=lindentech
sonar.projectName=Somon-Script
sonar.projectVersion=0.3.47

# ONLY analyze src directory - NEVER analyze tests
sonar.sources=src

# CRITICAL: Multiple layers of test exclusions to ensure complete exclusion
# Main exclusions - exclude test files from ALL analysis types
sonar.exclusions=tests/**,tests/**/*,tests/**/**,tests/**/*.ts,**/*.test.ts,**/*.spec.ts,**/test-*.ts,tests/helpers/**,tests/helpers/*.ts,dist/**,coverage/**,node_modules/**,examples/**,scripts/**,**/*.d.ts

# Explicitly exclude specific test files that keep appearing
sonar.exclusions.additional=tests/production-validation.test.ts,tests/cli-production-mode.test.ts,tests/helpers/test-utils.ts

# Coverage exclusions
sonar.coverage.exclusions=tests/**,tests/**/*,tests/**/*.ts,**/*.test.ts,**/*.spec.ts

# Duplication exclusions
sonar.cpd.exclusions=tests/**,tests/**/*,tests/**/*.ts,**/*.test.ts,**/*.spec.ts

# Security hotspot exclusions - CRITICAL for PATH warning
sonar.security.exclusions=tests/**,tests/**/*,tests/**/*.ts,**/*.test.ts,**/*.spec.ts,tests/production-validation.test.ts,tests/cli-production-mode.test.ts

# Issues exclusions - exclude all issues from test files
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5

# Ignore all issues in test directory
sonar.issue.ignore.multicriteria.e1.ruleKey=*
sonar.issue.ignore.multicriteria.e1.resourceKey=tests/**

# Ignore all issues in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=*
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.test.ts

# Ignore all issues in spec files
sonar.issue.ignore.multicriteria.e3.ruleKey=*
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.spec.ts

# Ignore S4036 (PATH security) in all test files
sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S4036
sonar.issue.ignore.multicriteria.e4.resourceKey=tests/**

# Ignore all security hotspots in tests
sonar.issue.ignore.multicriteria.e5.ruleKey=typescript:S*
sonar.issue.ignore.multicriteria.e5.resourceKey=tests/**/*.ts

# Skip patterns - tell scanner to completely skip these
sonar.skip.patterns=tests/**,tests/**/*,tests/**/*.ts

# Global issues exclusions for test files
sonar.global.exclusions=tests/**

# TypeScript/JavaScript specific settings
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Source encoding
sonar.sourceEncoding=UTF-8

# Language-specific file suffixes
sonar.typescript.file.suffixes=.ts
sonar.javascript.file.suffixes=.js

# Duplication detection settings
sonar.cpd.ts.minimumTokens=50
sonar.cpd.js.minimumTokens=50

# Code complexity settings (align with ESLint)
sonar.typescript.complexity.threshold=15
