#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged to check and fix staged files
npx lint-staged

# Run type checking
npm run type-check

# Run tests to ensure nothing is broken
npm test

# Automatically increment patch version before commit
echo "ðŸ”„ Auto-incrementing patch version..."
npm version patch --no-git-tag-version

# Stage the updated package.json and package-lock.json
git add package.json package-lock.json 2>/dev/null || git add package.json

echo "âœ… Patch version incremented successfully"